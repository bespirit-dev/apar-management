<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <title>Dashboard APAR</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />

  <!-- XLSX -->
  <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>

  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f0f2f5;
      margin: 0;
    }

    .sidebar {
      height: 100vh;
      background-color: #343a40;
      color: white;
      padding-top: 20px;
      position: fixed;
      width: 250px;
      transition: background-color 0.3s;
    }

    .sidebar a {
      color: white;
      display: block;
      padding: 12px 20px;
      text-decoration: none;
      cursor: pointer;
    }

    .sidebar a:hover {
      background-color: #495057;
      color : #0cd8b6;
    }

    .sidebar a.active {
      background-color: #495057;
      Color : #0cd8b6;
    }

    .menu-icon {
      width: 20px;
      height: 20px;
      filter: invert(1) brightness(0.9); /* jadi putih di background gelap */
      margin-right: 8px;
      vertical-align: middle;
      transition: all 0.25s ease;
      opacity: 0.85;
    }

    .sidebar a:hover .menu-icon {
      transform: scale(1.15);
      filter: invert(73%) sepia(74%) saturate(485%) hue-rotate(118deg) brightness(95%) contrast(90%);
      opacity: 1;
    }

    .sidebar a.active .menu-icon {
      filter: invert(73%) sepia(74%) saturate(485%) hue-rotate(118deg) brightness(95%) contrast(90%);
      opacity: 1;
    }

    .main-content {
      margin-left: 250px;
      padding: 80px 20px 20px 20px;
      min-height: 90vh;
    }

    #loader {
      display: none;
      margin-left: 250px;
      padding: 100px 0;
      text-align: center;
    }

    .spinner-border {
      width: 3rem;
      height: 3rem;
    }

    h1 {
      text-align: left;
      margin-bottom: 5px;
      font-size: 24px;
      font-family: "bauhaus 93", sans-serif;
    }

    #lastUpdate {
      text-align: left;
      font-size: 12px;
      color: #555;
      margin-bottom: 20px;
    }
    .controls {
      display: flex;
      padding: 2px 4px;
      justify-content: right;
      gap: 4px;
      margin-bottom: 20px;
      flex-wrap: wrap;
      margin-top: -50px;
      min-height: 12px;
    }
    .controls button,
    .controls select {
      padding: 4px 6px;
      border-radius: 5px;
      border: 1px solid #ccc;
      background: #fff;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 6px;
    }
    .controls img {
      width: 18px;
      height: 18px;
      filter: invert(0.3);
    }

    #aparContainer {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
      gap: 6px;
    }

    .card {
      background-image: url("bg.jpg");
      background-size: cover;
      background-position: center;
      padding: 15px;
      border-radius: 10px;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
      position: relative;
      min-height: 180px;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .card.expired-blink {
      animation: pulse 1.5s infinite alternate;
    }

    @keyframes pulse {
      from {
        transform: scale(1);
        box-shadow: 0 0 5px rgba(255, 0, 0, 0.4);
      }
      to {
        transform: scale(1.03);
        box-shadow: 0 0 15px rgba(255, 0, 0, 0.8);
      }
    }

    .card h1 {
      position: absolute;
      font-family: "Arial Black", sans-serif;
      bottom: 10px;
      right: 10px;
      padding: 5px 12px;
      font-weight: bold;
      border-radius: 6px;
      text-transform: uppercase;
      font-size: 14px;
      color: #fff;
    }

    .card h1.powder {
      background: #d9534f;
    }
    .card h1.foam {
      background: #0275d8;
    }
    .card h1.co2 {
      background: #5cb85c;
    }

    .card h2 {
      font-size: 18px;
      margin: 0;
      font-family: "Courier New", Courier, monospace;
    }
    .card h3,
    p {
      margin: 3px 0;
      font-size: 14px;
      font-family: Impact, Haettenschweiler, 'Arial Narrow Bold', sans-serif ;
    }

    .status {
      text-transform: uppercase;
      display: inline-block;
      color: white;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 14px;
      max-width: 80px;
      text-align: center;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .status.ready {
      background: #5cb85c;
    }
    .status.maintenance {
      background: #f0ad4e;
    }
    .status.expired {
      background: #d9534f;
    }

    .delete-btn,
    .update-btn {
      position: absolute;
      top: 10px;
      border: none;
      color: #fff;
      padding: 2px 4px;
      font-size: 12px;
      border-radius: 3px;
      cursor: pointer;
    }

    .delete-btn {
      right: 10px;
      background: #d9534f;
    }
    .update-btn {
      right: 65px;
      background: #333;
    }

    .pressure-warning {
      color: #c9302c;
      font-weight: bold;
    }
    .expired-warning {
      color: red;
      font-size: 12px;
      font-weight: bold;
      margin-top: 5px;
    }

    .maintenance-blink {
  animation: maintenancePulse 1.5s infinite alternate;
}

  @keyframes maintenancePulse {
    from { transform: scale(1); box-shadow: 0 0 5px rgba(255,165,0,0.4); }
    to   { transform: scale(1.03); box-shadow: 0 0 15px rgba(255,165,0,0.9); }
  }

.maintenance-warning {
  color: orange;
  font-size: 12px;
  font-weight: bold;
  margin-top: 5px;
}

.ganti-apar {
  color: red;
  font-weight: bold;
  font-size: 16px;
  margin-top: 5px;
  animation: blinkRed 1s infinite alternate;
}

@keyframes blinkRed {
  from { opacity: 1; }
  to { opacity: 0.4; }
}

    .exp-date {
      position: absolute;
      bottom: 10px;
      left: 10px;
      font-size: 12px;
      color: #777;
    }

    /* User info & logout */
   #userInfo {
      position: fixed;
      top: 0;
      left: 250px; /* karena sidebar lebarnya 250px */
      width: calc(100% - 250px);
      background: #f0f2f5;
      z-index: 1000;
      padding: 10px 20px;
      border-bottom: 1px solid #ccc;
      display: flex;
      justify-content: flex-end;
      align-items: center;
      gap: 10px;
      font-size: 16px;
    }

    #userInfo button {
      padding: 4px 8px;
      font-size: 14px;
      border: none;
      border-radius: 4px;
      background: #d9534f;
      color: white;
      cursor: pointer;
    }

    #userInfo button:hover {
      background: #c9302c;
    }

    #userInfo span {
      padding: 7px 10px;
      font-size: 14px;
      border: none;
      border-radius: 4px;
      background: #333;
      color: white;
      cursor: pointer;
    }

    #toggleSidebar {
      position: fixed;
      top: 5px;
      left: 220px;
      z-index: 3000;
      font-size: 20px;
      font-weight: bold;
      background-color: #343a40;
      color: #fff;
      border: 2px solid transparent;
      border-radius: 6px;
      padding: 1px 3px;
      cursor: pointer;
      transition: all 0.6s ease;
      
    }

    #toggleSidebar:hover {
      background-color: #0cd8b6;   /* warna hover */
      color: #fff;
      border-color: #0cd8b6;
      transform: scale(1.1);
      box-shadow: 0 0 10px rgba(12, 216, 182, 0.7);
    }

    #toggleSidebar:active {
      transform: scale(0.95);
      box-shadow: 0 0 4px rgba(12, 216, 182, 0.5);
    }


    /* Saat sidebar dilipat, tombol ikut geser */
    .sidebar.collapsed + #toggleSidebar,
    #toggleSidebar.sidebar-collapsed {
      left: 10px !important;
    }

    /* Responsif di layar kecil */
    @media (max-width: 768px) {
      #toggleSidebar {
        left: 10px !important;
      }
    }

    .sidebar.collapsed {
      width: 0;
      overflow: hidden;
      transition: all 0.6s ease;
    }
    .main-content.expanded {
      margin-left: 0;
      transition: all 0.6s ease;
    }

     /* ===========================
   MODAL STYLE (PREMIUM UI)
   =========================== */

.modal-content {
  border-radius: 14px;
  border: none;
  padding: 0;
  background: #ffffff;
  box-shadow: 0 8px 35px rgba(0,0,0,0.25);
  animation: modalFade 0.25s ease;
}

@keyframes modalFade {
  from { transform: scale(0.93); opacity: 0; }
  to   { transform: scale(1); opacity: 1; }
}

/* HEADER */
.modal-header {
  background: #343a40;
  color: white;
  border-radius: 14px 14px 0 0;
  padding: 14px 20px;
  font-family: "bauhaus 93", sans-serif; ;
}

.modal-title {
  font-size: 24px;
  font-weight: bold;
  letter-spacing: 0.5px;
}

/* BODY */
.modal-body {
  padding: 22px 26px;
  background: #f8f9fa;
}

.modal-body label {
  font-weight: bold;
  font-size: 13.5px;
  margin-bottom: 4px;
}

.modal-body input,
.modal-body select {
  border-radius: 10px;
  border: 1px solid #bcbcbc;
  padding: 7px 10px;
}

.modal-body input:focus,
.modal-body select:focus {
  border-color: #0cd8b6;
  box-shadow: 0 0 5px rgba(12, 216, 182, 0.6);
}

/* FOOTER */
.modal-footer {
  padding: 12px 18px;
  background: #eeeeee;
  border-top: 1px solid #ddd;
  border-radius: 0 0 14px 14px;
}

/* Button Save */
#btnUpdateSave,
.btn-save {
  background: #5cb85c !important;
  color: white !important;
  border: 1px solid #5cb85c !important;
  border-radius: 8px;
  padding: 8px 14px;
  font-weight: bold;
}

#btnUpdateSave:hover {
  background: #5cb81d !important;
}

/* Button Batal */
.btn-cancel,
.btn-secondary {
  background: #d9534f !important;
  color: white !important;
  border-radius: 8px;
  font-weight: bold;
  padding: 8px 14px;
  border: none;
}

.btn-cancel:hover,
.btn-secondary:hover {
  background: #c9302c !important;
}

    
  </style> 
</head>
<!-- Tombol Panah (Floating) -->
<button id="toggleSidebar" class="btn btn-dark">‚óÄ</button>

<!-- Sidebar -->
<div class="sidebar">
  <img src="dsngroup1.PNG" alt="Logo" style="width: 40%; display: block; margin: 0 auto 20px auto;" />

  <a id="menuDashboard" class="active" onclick="loadDashboard()">
    <img src="https://img.icons8.com/ios/50/computer--v1.png" alt="Monitor" class="menu-icon" /> Dashboard
  </a>

  <a id="menuMap" onclick="loadDistributionMap()">
    <img src="https://img.icons8.com/ios/50/worldwide-location--v1.png" alt="Map" class="menu-icon" /> Distribution Map
  </a>

  <a href="Input.html">
    <img src="https://img.icons8.com/ios/50/document--v1.png" alt="Form" class="menu-icon" /> Form Input
  </a>
  </div>
  <!-- Emergency Call Link X
  <a href="call.dart">
    <img src="https://img.icons8.com/ios/50/phone--v1.png" alt="Call" class="menu-icon" /> Emergency Call
  </a> 
</div>



<!-- Main Content Wrapper -->
<div class="main-content">

  <!-- User Info & Logout -->
  <div id="userInfo">
  <strong id="usernameText">Guest</strong> |
  <span id="statusText" class="badge bg-secondary">Unknown</span>
  <button class="btn btn-sm btn-danger" onclick="logout()">Logout</button>
</div>


  <!-- Dashboard Content -->
  <div id="dashboardContent" style="display:none;">
    <h1>Dashboard Monitoring APAR</h1>
    <div id="lastUpdate">Update: -</div>

    <div class="controls">
      <select id="filterJenis" class="form-select form-select-sm" style="width: 100px;">
        <option value="all">All Type</option>
        <option value="powder">Powder</option>
        <option value="foam">Foam</option>
        <option value="co2">CO‚ÇÇ</option>
      </select>
      <button id="btnSave"><img src="https://img.icons8.com/ios/50/save--v1.png" /> Save</button>
      <button id="btnBackup"><img src="https://img.icons8.com/ios/50/data-backup.png" /> Backup</button>
      <button id="btnExport"><img src="https://img.icons8.com/ios/50/export-excel.png" /> Export</button>
      <button id="btnPrint"><img src="https://img.icons8.com/ios/50/print.png" /> Print</button>
    </div>

    <div id="loader">
      <div class="spinner-border text-primary" role="status">
        <span class="visually-hidden">Loading...</span>
      </div>
      <p class="mt-2">Memuat data...</p>
    </div>

    <div id="aparContainer"></div>
  </div>

  <!-- Distribution Map -->
  <div id="distributionMapContent" style="display:none;">
    <h1>Peta Sebaran APAR</h1> <!-- ganti dari <h2> jadi <h1> agar konsisten -->
    <hr>
    <iframe
      src="map.html"
      width="100%"
      height="800"
      style="border:0;"
      allowfullscreen=""
      loading="lazy"
      referrerpolicy="no-referrer-when-downgrade">
    </iframe>
  </div>

</div>


  <!-- Firebase and script -->
  <script type="module">
  const name = localStorage.getItem("userName") || "Guest";
  const status = localStorage.getItem("userStatus") || "Unknown";

  document.getElementById("usernameText").innerText = name;
  document.getElementById("statusText").innerText = status;

  window.logout = () => {
    localStorage.clear();
    alert("Berhasil logout!");
    window.location.href = "login.html";
  };

  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.2/firebase-app.js";
  import { getDatabase, ref, onValue, set, push, remove, update, get } from "https://www.gstatic.com/firebasejs/10.7.2/firebase-database.js";

  const firebaseConfig = {
    apiKey: "AIzaSyAoZPIGUuCZxosN5m2LFirk9Spf7c9QZrA",
    authDomain: "be-spirit-project.firebaseapp.com",
    databaseURL: "https://be-spirit-project-default-rtdb.asia-southeast1.firebasedatabase.app",
    projectId: "be-spirit-project",
    storageBucket: "be-spirit-project.appspot.com",
    messagingSenderId: "518798108329",
    appId: "1:518798108329:web:f3a64e05dbb1c20751ebb8",
    measurementId: "G-55M6SPB3QM"
  };

  const app = initializeApp(firebaseConfig);
  const db = getDatabase(app);
  const aparRef = ref(db, "aparData");

  window.deleteData = async function(key) {
    if (confirm("Apakah Anda yakin ingin menghapus data ini?")) {
      try {
        await remove(ref(db, "aparData/" + key));
        alert("Data berhasil dihapus!");
        loadDashboard(); // render ulang
      } catch (error) {
        alert("Gagal menghapus data: " + error.message);
      }
    }
  };

  const updateData = async (key, newData) => {
    try {
      await update(ref(db, "aparData/" + key), newData);
      alert("Data berhasil diperbarui!");
    } catch (error) {
      alert("Gagal memperbarui data: " + error.message);
    }
  };

  let updateModal = new bootstrap.Modal(document.getElementById('updateModal'));

window.promptUpdate = (id, apar) => {
  document.getElementById("u_id").value = id;

  document.getElementById("u_number").value = apar.number;
  document.getElementById("u_location").value = apar.location;
  document.getElementById("u_type").value = apar.type;
  document.getElementById("u_pressure").value = apar.pressure;
  document.getElementById("u_pressureUnit").value = apar.pressureUnit;
  document.getElementById("u_capacity").value = apar.capacity;
  document.getElementById("u_capacityUnit").value = apar.capacityUnit;
  document.getElementById("u_status").value = apar.status;
  document.getElementById("u_expired").value = apar.expired;

  document.getElementById("u_segel").value = apar.segelCondition || "baik";
  document.getElementById("u_nozzle").value = apar.nozzleCondition || "baik";
  document.getElementById("u_r5").value = apar.r5Condition || "bersih";

  updateModal.show();
};

document.getElementById("btnUpdateSave").onclick = async () => {
  const id = document.getElementById("u_id").value;

  const newData = {
    number: document.getElementById("u_number").value,
    location: document.getElementById("u_location").value,
    type: document.getElementById("u_type").value,
    pressure: document.getElementById("u_pressure").value,
    pressureUnit: document.getElementById("u_pressureUnit").value,
    capacity: document.getElementById("u_capacity").value,
    capacityUnit: document.getElementById("u_capacityUnit").value,
    status: document.getElementById("u_status").value,
    expired: document.getElementById("u_expired").value,
    segelCondition: document.getElementById("u_segel").value,
    nozzleCondition: document.getElementById("u_nozzle").value,
    r5Condition: document.getElementById("u_r5").value,
  };

  await update(ref(db, "aparData/" + id), newData);

  updateModal.hide();
  loadDashboard();
};


  function setActiveMenu(menuId) {
    const menuItems = document.querySelectorAll('.sidebar a');
    menuItems.forEach(item => item.classList.remove('active'));
    const activeMenu = document.getElementById(menuId);
    if (activeMenu) activeMenu.classList.add('active');
  }

  window.loadDistributionMap = () => {
    setActiveMenu("menuMap");
    document.getElementById("dashboardContent").style.display = "none";
    document.getElementById("loader").style.display = "none";
    document.getElementById("distributionMapContent").style.display = "block";
  };

  window.loadDashboard = () => {
    setActiveMenu("menuDashboard");
    document.getElementById("dashboardContent").style.display = "none";
    document.getElementById("distributionMapContent").style.display = "none";
    document.getElementById("loader").style.display = "block";

    onValue(aparRef, snapshot => {
      const data = snapshot.val() || {};
      renderDashboard(data);
      document.getElementById("lastUpdate").innerText = "Update: " + new Date().toLocaleString();
      document.getElementById("loader").style.display = "none";
      document.getElementById("dashboardContent").style.display = "block";
    }, { onlyOnce: true });
  };

  function autoStatus(apar) {
  const tekananRendah =
    (apar.pressureUnit === "psi" && apar.pressure < 190) ||
    (apar.pressureUnit === "bar" && apar.pressure < 3);

  const segelRusak  = apar.segelCondition?.toLowerCase() === "rusak";
  const nozzleRusak = apar.nozzleCondition?.toLowerCase() === "rusak";
  const r5Kotor     = apar.r5Condition?.toLowerCase() === "kotor";

  const expiredDate = new Date(apar.expired);
  const isExpired   = apar.expired && !isNaN(expiredDate) && expiredDate < new Date();

  // ====== GANTI APAR ======
  if (tekananRendah && segelRusak && nozzleRusak && r5Kotor && isExpired) {
    return "ganti-apar";
  }

  // ====== EXPIRED ======
  if (isExpired) {
    return "expired";
  }

  // ====== MAINTENANCE ======
  if (tekananRendah || segelRusak || nozzleRusak || r5Kotor) {
    return "maintenance";
  }

  // ====== READY ======
  return "ready";
}


 function renderDashboard(data = {}) {
  const container = document.getElementById("aparContainer");
  container.innerHTML = "";
  const filterJenis = document.getElementById("filterJenis").value;

  const isAdmin = status.toLowerCase() === "admin"; // cek role user

  Object.entries(data).forEach(([key, apar]) => {
    if (filterJenis !== "all" && apar.type?.toLowerCase() !== filterJenis) return;

    let typeClass = apar.type?.toLowerCase() || "";

    // --- PRESSURE CHECK ---
    let pressureRendah = false;
    if (
      (apar.pressureUnit === "psi" && apar.pressure < 190) ||
      (apar.pressureUnit === "bar" && apar.pressure < 3)
    ) {
      pressureRendah = true;
    }

    // --- EXPIRED CHECK ---
    const expiredDate = new Date(apar.expired);
    const isExpired = apar.expired && !isNaN(expiredDate) && expiredDate < new Date();

    // --- CONDITION CHECK ---
    const segelRusak  = apar.segelCondition?.toLowerCase() === "rusak";
    const nozzleRusak = apar.nozzleCondition?.toLowerCase() === "rusak";
    const r5Kotor     = apar.r5Condition?.toLowerCase() === "kotor";

    // --- STATUS OTOMATIS ---
    apar.status = autoStatus(apar);

    let statusClass = apar.status === "maintenance" ? "maintenance-blink" : "";

    // --- NOTIFIKASI ---
    let gantiAparNotif = "";
    if (segelRusak && nozzleRusak && r5Kotor && pressureRendah && isExpired) {
      gantiAparNotif = `<div class='ganti-apar'>üö® GANTI APAR!</div>`;
    }

    let expiredNotif = "";
    if (isExpired && !gantiAparNotif) {
      expiredNotif = `<div class="expired-warning">‚ö†Ô∏è Sudah Expired!</div>`;
    }

    // --- TEMPLATE CARD ---
    const card = document.createElement("div");
    card.className = `card ${statusClass}`;

    card.innerHTML = `
      ${isAdmin ? `<button class="update-btn" onclick='promptUpdate("${key}", ${JSON.stringify(apar).replace(/"/g,'&quot;')})'>Update</button>` : ""}
      ${isAdmin ? `<button class="delete-btn" onclick='deleteData("${key}")'>Delete</button>` : ""}
      <h1 class="${typeClass}">${apar.type}</h1>
      <h2>${apar.number} - ${apar.location}</h2>
      <h3>‚è±Ô∏è ${apar.pressure} ${apar.pressureUnit}</h3>
      <p>‚öñÔ∏è ${apar.capacity} ${apar.capacityUnit}</p>
      <span class="status ${apar.status}">${apar.status.toUpperCase()}</span>
      ${gantiAparNotif}
      ${expiredNotif}
      <span class="exp-date">üóìÔ∏è Exp: ${apar.expired || "-"}</span>
    `;

    container.appendChild(card);
  });
}
  // Filter by Type
  document.getElementById("filterJenis").addEventListener("change", () => {
    get(aparRef).then(snapshot => {
      renderDashboard(snapshot.val() || {});
    });
  });

  // Export to Excel
  document.getElementById("btnExport").addEventListener("click", async () => {
    const snapshot = await get(aparRef);
    const data = snapshot.val() || {};
    const ws_data = [["Number","Location","Type","Pressure","PressureUnit","Capacity","CapacityUnit","Status","Expired","Segel","Nozzle","5R"]];
    Object.values(data).forEach(a => {
      ws_data.push([
        a.number, a.location, a.type, a.pressure, a.pressureUnit,
        a.capacity, a.capacityUnit, a.status, a.expired,
        a.segelCondition || "-", a.nozzleCondition || "-", a.r5Condition || "-"
      ]);
    });
    const wb = XLSX.utils.book_new();
    const ws = XLSX.utils.aoa_to_sheet(ws_data);
    XLSX.utils.book_append_sheet(wb, ws, "APAR");
    XLSX.writeFile(wb, "checklist_apar.xlsx");
  });

  document.getElementById("btnBackup").addEventListener("click", async () => {
    const snapshot = await get(aparRef);
    const data = snapshot.val() || {};
    const blob = new Blob([JSON.stringify(data, null, 2)], {type: "application/json"});
    const url = URL.createObjectURL(blob);
    const a = document.createElement("a");
    a.href = url;
    a.download = "apar_backup.json";
    a.click();
    URL.revokeObjectURL(url);
  });

  document.getElementById("btnPrint").addEventListener("click", () => window.print());

  document.getElementById("btnSave").addEventListener("click", () => {
    alert("Data realtime sudah tersimpan di Firebase");
  });

  // Optional: Tambahkan fitur pencarian
  const searchBox = document.createElement("input");
  searchBox.placeholder = "Search...";
  searchBox.className = "form-control form-control-sm";
  searchBox.style.maxWidth = "170px";  
  document.querySelector(".controls").prepend(searchBox);

  searchBox.addEventListener("input", async () => {
    const query = searchBox.value.toLowerCase();
    const snapshot = await get(aparRef);
    const data = snapshot.val() || {};

    const filtered = Object.fromEntries(
      Object.entries(data).filter(([_, a]) =>
        a.location?.toLowerCase().includes(query) || a.number?.toString().includes(query)
      )
    );
    renderDashboard(filtered);
  });

  window.addEventListener("DOMContentLoaded", () => loadDashboard());
  // === Sidebar Toggle (Panah Kiri/Kanan) ===
  const sidebar = document.querySelector(".sidebar");
  const toggleBtn = document.getElementById("toggleSidebar");
  const mainContent = document.querySelector(".main-content");

  toggleBtn.addEventListener("click", () => {
    sidebar.classList.toggle("collapsed");
    mainContent.classList.toggle("expanded");
    toggleBtn.classList.toggle("sidebar-collapsed");

    // ubah simbol panah sesuai status
    if (sidebar.classList.contains("collapsed")) {
      toggleBtn.innerText = "‚ñ∂";
    } else {
      toggleBtn.innerText = "‚óÄ";
    }
  });


</script>
<!-- UPDATE MODAL -->
<div class="modal fade" id="updateModal" tabindex="-1">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">

      <div class="modal-header bg-dark text-white">
        <h5 class="modal-title">Update Data APAR</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
      </div>

      <div class="modal-body">
        <form id="updateForm">

          <input type="hidden" id="u_id">

          <div class="mb-2">
            <label>Nuber of APAR</label>
            <input type="text" class="form-control" id="u_number">
          </div>

          <div class="mb-2">
            <label>Location</label>
            <input type="text" class="form-control" id="u_location">
          </div>

          <div class="mb-2">
            <label>Type</label>
            <select class="form-select" id="u_type">
              <option value="powder">Powder</option>
              <option value="foam">Foam</option>
              <option value="co2">CO2</option>
            </select>
          </div>

          <div class="row">
            <div class="col">
              <label>Pressure</label>
              <input type="number" class="form-control" id="u_pressure">
            </div>
            <div class="col">
              <label>Unit</label>
              <select class="form-select" id="u_pressureUnit">
                <option value="psi">PSI</option>
                <option value="bar">Bar</option>
              </select>
            </div>
          </div>

          <div class="row mt-2">
            <div class="col">
              <label>Capacity</label>
              <input type="number" class="form-control" id="u_capacity">
            </div>
            <div class="col">
              <label>Unit</label>
              <select class="form-select" id="u_capacityUnit">
                <option value="kg">Kg</option>
                <option value="l">L</option>
              </select>
            </div>
          </div>

          <div class="mt-2">
            <label>Status</label>
            <select class="form-select" id="u_status">
              <option value="ready">READY</option>
              <option value="maintenance">MAINTENANCE</option>
              <option value="expired">EXPIRED</option>
            </select>
          </div>

          <div class="mt-2">
            <label>Expired Date</label>
            <input type="date" class="form-control" id="u_expired">
          </div>

          <hr>

          <div class="mb-2">
            <label>Segel Condition</label>
            <select class="form-select" id="u_segel">
              <option value="baik">Baik</option>
              <option value="rusak">Rusak</option>
            </select>
          </div>

          <div class="mb-2">
            <label>Nozzle Condition</label>
            <select class="form-select" id="u_nozzle">
              <option value="baik">Baik</option>
              <option value="rusak">Rusak</option>
            </select>
          </div>

          <div class="mb-2">
            <label>5R Condition</label>
            <select class="form-select" id="u_r5">
              <option value="bersih">Bersih</option>
              <option value="kotor">Kotor</option>
            </select>
          </div>

        </form>
      </div>

      <div class="modal-footer">
        <button class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
        <button class="btn btn-success" id="btnUpdateSave">Save</button>
      </div>

    </div>
  </div>
</div>
  <!-- Bootstrap JS Bundle -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>



